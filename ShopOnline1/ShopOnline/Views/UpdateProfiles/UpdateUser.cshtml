@{
    ViewBag.Title = "Update User";
    Layout = "~/Views/Shared/AdminLayout.cshtml";
}

@{
    ShopOnline.Models.User userObj = null;
    if (ViewData.Model != null)
    {
        userObj = (ShopOnline.Models.User)ViewData.Model;
    }

    if (userObj == null)
    {
        userObj = new ShopOnline.Models.User();
    }
    string userId = userObj.UserId.ToString();
}

@*<link rel="stylesheet" href="http://cdn.jsdelivr.net/bootstrap/3.3.2/css/bootstrap.min.css">*@
<script src="http://formValidation.io/vendor/formvalidation/js/formValidation.min.js"></script>
<script src="http://formValidation.io/vendor/formvalidation/js/framework/bootstrap.min.js"></script>

<script src="~/Scripts/SiteJs/UserUpdateValidation.js"></script>
<script src="~/Scripts/SiteJs/UpdateUserProfiles.js"></script>

<style>
    .bgColorYellow {
        font-weight: bold;
        padding: 3px;
    }

    .profile-contact-links {
        border: solid 1px #FBD76B;
        background-color: transparent !important;
    }
</style>


<div class="page-header">
    <div class="pageTitle">Update User Profile</div>
</div>


<div class="row">
    <div class="col-xs-12">

        <div>
            <div id="user-profile-1" class="user-profile row">
                <div class="col-xs-12 col-sm-3 center">
                    <div>
                        <form id="frmUserAvatar" name="frmUserAvatar" method="post" enctype="multipart/form-data" action="~/">
                            <div class="profile-picture">
                                <div class="profileUploaderBox">

                                    <input class="fileProfile" type="file" id="UpdateUserAvatar" name="UpdateUserAvatar" style="opacity:0" />
                                </div>
                                <div class="profilePhotoBox">
                                    @{
                                        string avatarPath = "BlankImage.jpg";
                                        if (!string.IsNullOrWhiteSpace(userObj.ProfilePhoto))
                                        {
                                            avatarPath = userObj.ProfilePhoto;
                                        }
                                    }
                                    <img class="img-responsive" title="@userObj.UserFirstName @userObj.UserLastName" alt="@userObj.UserFirstName @userObj.UserLastName" src="~/UploadedImagesThumbnails/@avatarPath" />

                                </div>

                            </div>

                            @{
                                string USER_ID = new ShopOnline.Common.SecurityManager().EncodeString(Convert.ToString(userObj.UserId));
                            }
                            <input type="hidden" id="UserId" name="UserId" value="@USER_ID" />
                        </form>

                        <div class="space-4"></div>

                        <div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right">
                            <div class="inline position-relative">
                                <span class="user-title-label">
                                    <span class="white">@userObj.UserFirstName @userObj.UserLastName</span>
                                </span>
                            </div>
                        </div>


                        <div class="space-6"></div>

                        <div class="profile-contact-info">

                            <div class="profile-contact-links align-left">

                                <table>
                                    <tr>
                                        <td class="bgColorYellow">Login Name</td>
                                        <td style="padding-left:10px">@userObj.UserLoginName</td>
                                    </tr>
                                </table>


                            </div>

                        </div>

                    </div>


                </div>

                <div class="col-xs-12 col-sm-9">


                    @Html.Partial("OperationMessage")

                    <div class="profile-user-info parentBoxForm" id="profileInfoViewMode">


                        <button class="btn btn-app btn-yellow btn-xs childBoxFormEditButton" id="btnEditUserProfile">
                            <i class="icon-edit biggerr-160"></i>
                            Edit
                        </button>
                        <div class="profile-info-row">
                            <div class="leftLabelBlack"> Login Name </div>

                            <div class="profile-info-value">
                                <span class="editable">@userObj.UserLoginName&nbsp;</span>
                            </div>
                        </div>
                        <div class="profile-info-row">
                            <div class="leftLabelBlack"> First Name </div>

                            <div class="profile-info-value">
                                <span class="editable">@userObj.UserFirstName&nbsp;</span>
                            </div>
                        </div>

                        <div class="profile-info-row">
                            <div class="leftLabelBlack"> Last Name </div>

                            <div class="profile-info-value">
                                <span class="editable">@userObj.UserLastName&nbsp;</span>
                            </div>
                        </div>

                        <div class="profile-info-row">
                            <div class="leftLabelBlack"> Cell Number </div>

                            <div class="profile-info-value">
                                <span class="editable">@userObj.UserContactNumber&nbsp;</span>
                            </div>
                        </div>

                        <div class="profile-info-row">
                            <div class="leftLabelBlack"> Email Address </div>

                            <div class="profile-info-value">
                                <span class="editable">@userObj.Contact_Email&nbsp;</span>
                            </div>
                        </div>
                        <div class="profile-info-row">
                            <div class="leftLabelBlack"> Date of Birth </div>

                            <div class="profile-info-value">
                                @{
                                    string day = null;
                                    string month = null;
                                    string year = null;

                                    string s = Convert.ToString(userObj.DOB);
                                    string[] values = s.Split('/', ' ');
                                    int ii = values.Length;
                                    for (int i = 0; i < values.Length; i++)
                                    {
                                        values[i] = values[i].Trim();
                                        if (i == 1)
                                        {
                                            day = values[i].Trim();
                                        }
                                        else if (i == 0)
                                        {
                                            string month_A = values[i].Trim();
                                            if (month_A == "1")
                                            {
                                                month = "January";
                                            }
                                            else if (month_A == "2")
                                            {
                                                month = "Febuary";
                                            }
                                            else if (month_A == "3")
                                            {
                                                month = "March";
                                            }
                                            else if (month_A == "4")
                                            {
                                                month = "April";
                                            }
                                            else if (month_A == "5")
                                            {
                                                month = "May";
                                            }
                                            else if (month_A == "6")
                                            {
                                                month = "June";
                                            }
                                            else if (month_A == "7")
                                            {
                                                month = "July";
                                            }
                                            else if (month_A == "8")
                                            {
                                                month = "August";
                                            }
                                            else if (month_A == "9")
                                            {
                                                month = "September";
                                            }
                                            else if (month_A == "10")
                                            {
                                                month = "October";
                                            }
                                            else if (month_A == "11")
                                            {
                                                month = "November";
                                            }
                                            else if (month_A == "12")
                                            {
                                                month = "December";
                                            }
                                        }
                                        else if (i == 2)
                                        {
                                            year = values[i].Trim();
                                        }
                                    }
                                    <span class="editable">@month @day,@year&nbsp;</span>
                                }
                                @*<span class="editable">@Convert.ToDateTime(userObj.DOB).ToShortDateString()&nbsp;</span>*@
                            </div>
                        </div>

                        <div class="profile-info-row">
                            <div class="leftLabelBlack"> Gender </div>

                            <div class="profile-info-value">
                                <span class="editable">@userObj.Gender&nbsp;</span>
                            </div>
                        </div>
                    </div>

                    <div class="profile-user-info" id="profileInfoEditMode" style="display:none">

                        <form class="form-horizontal" id="frmProfileInfo" name="frmProfileInfo" action="~/UpdateProfiles/UpdateUser" method="post">

                            <input type="hidden" value="@userObj.UserId" id="userId" name="userId" />

                            <div class="form-group">
                                <label class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1">Login Name</label>

                                <div class="col-xs-10 col-sm-10 col-md-10">
                                    <input type="text" id="txtLoginName" name="txtLoginName" placeholder="Login Name" class="form-control" value="@userObj.UserLoginName" />
                                </div>
                                <label id="lblloginname" style="display:none" class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1"></label>
                                <div id="retResult" class="col-xs-10 col-sm-10 col-md-10"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1">First Name</label>

                                <div class="col-xs-10 col-sm-10 col-md-10">
                                    <input type="text" id="txtFirstName" name="txtFirstName" placeholder="First Name" class="form-control" value="@userObj.UserFirstName" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1">Last Name</label>

                                <div class="col-xs-10 col-sm-10 col-md-10">
                                    <input type="text" id="txtLastName" name="txtLastName" placeholder="Last Name" class="form-control" value="@userObj.UserLastName" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1">Cell Number</label>

                                <div class="col-xs-10 col-sm-10 col-md-10">
                                    <input type="text" id="txtCellNumber" name="txtCellNumber" placeholder="Cell Number" class="form-control" value="@userObj.UserContactNumber" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1">Email Address</label>

                                <div class="col-xs-10 col-sm-10 col-md-10">
                                    @*<span style="margin-top:4px; border:1px solid black" id="txtEmail" class="col-xs-10 col-sm-10 col-md-10">@userObj.Contact_Email&nbsp;</span>*@
                                    <input type="text" id="txtEmail disabledInput" name="txtEmail" placeholder="E mail" class="form-control" value="@userObj.Contact_Email" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1">Date of Birth</label>

                                <div class="col-xs-10 col-sm-10 col-md-10">

                                    <div class="inline checkbox">
                                        <select class="span2 col-md-2 form-control" title="Day" id="txtDay" name="txtDay">

                                            <option value="" selected>Day</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                            <option value="7">7</option>
                                            <option value="8">8</option>
                                            <option value="9">9</option>
                                            <option value="10">10</option>
                                            <option value="11">11</option>
                                            <option value="12">12</option>
                                            <option value="13">13</option>
                                            <option value="14">14</option>
                                            <option value="15">15</option>
                                            <option value="16">16</option>
                                            <option value="17">17</option>
                                            <option value="18">18</option>
                                            <option value="19">19</option>
                                            <option value="20">20</option>
                                            <option value="21">21</option>
                                            <option value="22">22</option>
                                            <option value="23">23</option>
                                            <option value="24">24</option>
                                            <option value="25">25</option>
                                            <option value="26">26</option>
                                            <option value="27">27</option>
                                            <option value="28">28</option>
                                            <option value="29">29</option>
                                            <option value="30">30</option>
                                            <option value="31">31</option>
                                        </select>
                                    </div>
                                    <div class="inline checkbox" style="margin-left: -26px">
                                        <select class="span2 col-md-2 form-control" id="txtMonth" name="txtMonth">
                                            <option value="">Month</option>
                                            <option value="January">Jan</option>
                                            <option value="February ">Feb</option>
                                            <option value="March">Mar</option>
                                            <option value="April">Apr</option>
                                            <option value="May">May</option>
                                            <option value="June">Jun</option>
                                            <option value="July">Jul</option>
                                            <option value="August">Aug</option>
                                            <option value="September">Sep</option>
                                            <option value="October">Oct</option>
                                            <option value="November">Nov</option>
                                            <option value="December">Dec</option>
                                        </select>
                                    </div>
                                    <div class="inline checkbox" style="margin-left:-23px">
                                        <select class="span2 col-md-2 form-control" id="txtYear" name="txtYear">
                                            <option value="" selected>Year</option>
                                            <option value="2015">2015</option>
                                            <option value="2014">2014</option>
                                            <option value="2013">2013</option>
                                            <option value="2012">2012</option>
                                            <option value="2011">2011</option>
                                            <option value="2010">2010</option>
                                            <option value="2009">2009</option>
                                            <option value="2008">2008</option>
                                            <option value="2007">2007</option>
                                            <option value="2006">2006</option>
                                            <option value="2005">2005</option>
                                            <option value="2004">2004</option>
                                            <option value="2003">2003</option>
                                            <option value="2002">2002</option>
                                            <option value="2001">2001</option>
                                            <option value="2000">2000</option>
                                            <option value="1999">1999</option>
                                            <option value="1998">1998</option>
                                            <option value="1997">1997</option>
                                            <option value="1996">1996</option>
                                            <option value="1995">1995</option>
                                            <option value="1994">1994</option>
                                            <option value="1993">1993</option>
                                            <option value="1992">1992</option>
                                            <option value="1991">1991</option>
                                            <option value="1990">1990</option>
                                            <option value="1989">1989</option>
                                            <option value="1988">1988</option>
                                            <option value="1987">1987</option>
                                            <option value="1986">1986</option>
                                            <option value="1985">1985</option>
                                            <option value="1984">1984</option>
                                            <option value="1983">1983</option>
                                            <option value="1982">1982</option>
                                            <option value="1981">1981</option>
                                            <option value="1980">1980</option>
                                            <option value="1979">1979</option>
                                            <option value="1978">1978</option>
                                            <option value="1977">1977</option>
                                            <option value="1976">1976</option>
                                            <option value="1975">1975</option>
                                            <option value="1974">1974</option>
                                            <option value="1973">1973</option>
                                            <option value="1972">1972</option>
                                            <option value="1971">1971</option>
                                            <option value="1970">1970</option>
                                            <option value="1969">1969</option>
                                            <option value="1968">1968</option>
                                            <option value="1967">1967</option>
                                            <option value="1966">1966</option>
                                            <option value="1965">1965</option>
                                            <option value="1964">1964</option>
                                            <option value="1963">1963</option>
                                            <option value="1962">1962</option>
                                            <option value="1961">1961</option>
                                            <option value="1960">1960</option>
                                            <option value="1959">1959</option>
                                            <option value="1958">1958</option>
                                            <option value="1957">1957</option>
                                            <option value="1956">1956</option>
                                            <option value="1955">1955</option>
                                            <option value="1954">1954</option>
                                            <option value="1953">1953</option>
                                            <option value="1952">1952</option>
                                            <option value="1951">1951</option>
                                            <option value="1950">1950</option>
                                            <option value="1949">1949</option>
                                            <option value="1948">1948</option>
                                            <option value="1947">1947</option>
                                            <option value="1946">1946</option>
                                            <option value="1945">1945</option>
                                            <option value="1944">1944</option>
                                            <option value="1943">1943</option>
                                            <option value="1942">1942</option>
                                            <option value="1941">1941</option>
                                            <option value="1940">1940</option>
                                            <option value="1939">1939</option>
                                            <option value="1938">1938</option>
                                            <option value="1937">1937</option>
                                            <option value="1936">1936</option>
                                            <option value="1935">1935</option>
                                            <option value="1934">1934</option>
                                            <option value="1933">1933</option>
                                            <option value="1932">1932</option>
                                            <option value="1931">1931</option>
                                            <option value="1930">1930</option>
                                            <option value="1929">1929</option>
                                            <option value="1928">1928</option>
                                            <option value="1927">1927</option>
                                            <option value="1926">1926</option>
                                            <option value="1925">1925</option>
                                            <option value="1924">1924</option>
                                            <option value="1923">1923</option>
                                            <option value="1922">1922</option>
                                            <option value="1921">1921</option>
                                            <option value="1920">1920</option>
                                            <option value="1919">1919</option>
                                            <option value="1918">1918</option>
                                            <option value="1917">1917</option>
                                            <option value="1916">1916</option>
                                            <option value="1915">1915</option>
                                        </select>
                                    </div>

                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1">Gender</label>

                                <div class="col-xs-10 col-sm-10 col-md-10">
                                    @if (userObj.Gender != null && userObj.Gender.ToString().Equals("Male"))
                                    {
                                        <table>
                                            <tr>
                                                <td style="width:20px">
                                                    <input type="radio" id="radMale" name="radGender" checked="checked" value="Male">
                                                </td>
                                                <td style="padding-left:5px;width:80px">
                                                    Male
                                                </td>
                                                <td style="width:20px">
                                                    <input type="radio" id="radFemale" name="radGender" value="Female">
                                                </td>
                                                <td style="padding-left:5px;width:80px">
                                                    Female
                                                </td>
                                            </tr>
                                        </table>
                                    }
                                    else if (userObj.Gender != null && userObj.Gender.ToString().Equals("Female"))
                                    {
                                        <table>
                                            <tr>
                                                <td style="width:20px">
                                                    <input type="radio" id="radMale" name="radGender" value="Male">
                                                </td>
                                                <td style="padding-left:5px;width:80px">
                                                    Male
                                                </td>
                                                <td style="width:20px">
                                                    <input type="radio" id="radFemale" name="radGender" checked="checked" value="Female">
                                                </td>
                                                <td style="padding-left:5px;width:80px">
                                                    Female
                                                </td>
                                            </tr>
                                        </table>
                                    }
                                    else
                                    {

                                        <table>
                                            <tr>
                                                <td style="width:20px">
                                                    <input type="radio" id="radMale" name="radGender" value="Male" required="required">
                                                </td>
                                                <td style="padding-left:5px;width:80px">
                                                    Male
                                                </td>
                                                <td style="width:20px">
                                                    <input type="radio" id="radFemale" name="radGender" value="Female" required="required">
                                                </td>
                                                <td style="padding-left:5px;width:80px">
                                                    Female
                                                </td>
                                            </tr>
                                        </table>
                                    }


                                </div>
                            </div>



                            <div class="form-group">


                                <label class="col-xs-2 col-sm-2 col-md-2 control-label no-padding-right blackLabel" for="form-field-1">&nbsp;</label>

                                <div class="col-xs-10 col-sm-10 col-md-10">
                                    <button class="btn btn-primary btn-sm" type="submit">
                                        <i class="icon-ok bigger-110"></i>
                                        Save
                                    </button>
                                    &nbsp;
                                    <button class="btn btn-info btn-sm" type="button" id="btnCancelProfileInfo">
                                        <i class="icon-reply align-top bigger-125"></i>
                                        Cancel
                                    </button>

                                </div>

                            </div>


                        </form>







                    </div>
                    <div class="space-20"></div>

                    @*<div class="row">
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <form id="frmStatus" name="frmStatus" method="post" action="~/">
                                    <select id="selStatus" name="selStatus" class="form-control">
                                        <option value=""> - - Select - -</option>
                                        <option value="1">Active</option>
                                        <option value="2">In-Active</option>
                                        <option value="3">Suspended</option>
                                        <option value="4">Blocked</option>
                                    </select>
                                    <input type="hidden" id="hidUserId" name="hidUserId" value="@ViewData["user_Id"]" />
                                </form>
                            </div>
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <button type="button" id="btnChangeUserStatus" name="btnChangeUserStatus" class="btn btn-sm btn-success" style="float:left">
                                    Change Status
                                    <i class="icon-arrow-right icon-on-right bigger-110"></i>
                                </button>
                            </div>
                        </div>*@


                </div>
            </div>
        </div>


        <!-- PAGE CONTENT ENDS -->
    </div><!-- /.col -->
</div>



@*<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>*@

<!-- <![endif]-->
<!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->

<script type="text/javascript">
    

    jQuery(document).ready(function ($) {

        var siteBaseUrl = document.getElementById("frmSiteUrl").action;


        $("#txtLoginName").blur(function () {
            var a = document.forms["frmProfileInfo"]["txtLoginName"].value;
            if (a != "" || a != null) {
                $("#retResult").get()[0].innerHTML = "<img src='" + siteBaseUrl + "Content/AdminContents/img/ajax-loader.gif' alt='loader' />";
                $.ajax({
                    type: "GET",
                    url: siteBaseUrl + "UpdateProfiles/CheckUserAvailability?txtLoginName=" + document.getElementById("txtLoginName").value,
                    success: function (response) {
                        if (response == "1") {
                            showElement('retResult');
                            $("#retResult").get()[0].innerHTML = "<span style='color:Green'>Login Name Available</span>";
                        }
                        else if (response == "2") {
                            hideElement('retResult');
                        }
                        else {
                            showElement('lblloginname');
                            showElement('retResult');
                            $("#retResult").get()[0].innerHTML = "<span style='color:Red'>Sorry Login Name Not Available</span>";
                        }
                    },
                    error: function (ex) {
                    }
                });
            }


        });

    });

</script>